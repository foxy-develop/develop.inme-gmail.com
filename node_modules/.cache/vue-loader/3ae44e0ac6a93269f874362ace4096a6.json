{"remainingRequest":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/src/components/dashboard-blocks/dashboard-map.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/src/components/dashboard-blocks/dashboard-map.vue","mtime":1586390573641},{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTZWN0aW9uIGZyb20gIi4uL2xheW91dC9TZWN0aW9uIjsKaW1wb3J0IEJ1dHRvbiBmcm9tICIuLi9sYXlvdXQvQnV0dG9uIjsKaW1wb3J0IEJsb2NrIGZyb20gIi4uL2xheW91dC9CbG9jayI7CmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IFBlcmlvZFN3aXRjaGVyIGZyb20gIi4uL3BlcmlvZC1zd2ljdGhlciI7CmltcG9ydCBDaGFydE1hcCBmcm9tICIuLi9tYXAiCmltcG9ydCBNYXBDb3VudGVycyBmcm9tICIuLi9jb3VudGVycy9NYXBDb3VudGVycyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGFzaGJvYXJkTWFwIiwKICBjb21wb25lbnRzOiB7CiAgICBTZWN0aW9uLCBCbG9jaywgQnV0dG9uLCBQZXJpb2RTd2l0Y2hlciwgQ2hhcnRNYXAsIE1hcENvdW50ZXJzCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogdHJ1ZQogICAgfQogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICBpZiAoIXRoaXMuaXNNYXBMb2FkZWQpIHsKICAgICAgYXdhaXQgdGhpcy5NQVBfUkVRVUVTVCgpLnRoZW4oKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbJ01BUF9SRVFVRVNUJywgJ01BUF9TV0lUQ0gnXSksCiAgICBsb2FkZWQoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2xvYWRlZCcsIHRoaXMubG9hZGluZyk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ2dldE1hcFBlcmlvZCcsICdnZXRNYXBEYXRhJywgJ2lzTWFwTG9hZGVkJ10pLAogICAgc29ydEFycmF5KCkgewogICAgICBjb25zdCBhcnIgPSB0aGlzLmdldE1hcERhdGE7CiAgICAgIGNvbnN0IG5ld0FyciA9IGFycgogICAgICAgIC5zbGljZSgpCiAgICAgICAgLnNvcnQoKGEsIGIpID0+CiAgICAgICAgICBhLnZhbHVlX25lZ2F0aXZlID09PSBwYXJzZUZsb2F0KGIudmFsdWVfbmVnYXRpdmUpCiAgICAgICAgICAgID8gMAogICAgICAgICAgICA6IHBhcnNlRmxvYXQoYS52YWx1ZV9uZWdhdGl2ZSkgPCBwYXJzZUZsb2F0KGIudmFsdWVfbmVnYXRpdmUpCiAgICAgICAgICAgID8gMQogICAgICAgICAgICA6IC0xCiAgICAgICAgKTsKCiAgICAgIHJldHVybiBuZXdBcnIKICAgICAgICAuZmlsdGVyKGVsID0+IGVsLnZhbHVlX25lZ2F0aXZlICE9IDAgfHwgZWwudmFsdWUgIT0gMCkuc2xpY2UoMCwgMTApOwoKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBsb2FkaW5nKCkgewogICAgICB0aGlzLmxvYWRlZCgpOwogICAgfQogIH0KfQo="},{"version":3,"sources":["dashboard-map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dashboard-map.vue","sourceRoot":"src/components/dashboard-blocks","sourcesContent":["<template>\n  <Section :title=\"'География выдачи'\" reversed :loading=\"loading\">\n    <template v-slot:side>\n      <MapCounters v-if=\"!loading\" :data=\"sortArray\" />\n    </template>\n    <template v-slot:content>\n      <Block responsive :loading=\"loading\">\n        <template v-slot:header>\n          <PeriodSwitcher\n            :current=\"getMapPeriod\"\n            :name=\"'map'\"\n            :callback=\"MAP_SWITCH\"\n          ></PeriodSwitcher>\n        </template>\n        <template v-slot:content>\n          <ChartMap :data=\"getMapData\" key=\"content\" v-if=\"!loading\"></ChartMap>\n        </template>\n        <template v-slot:button>\n          <Button :isRoute=\"true\" :route=\"'negative'\">Просмотреть негатив</Button>\n        </template>\n      </Block>\n    </template>\n  </Section>\n</template>\n\n<script>\nimport Section from \"../layout/Section\";\nimport Button from \"../layout/Button\";\nimport Block from \"../layout/Block\";\nimport { mapGetters, mapActions } from \"vuex\";\nimport PeriodSwitcher from \"../period-swicther\";\nimport ChartMap from \"../map\"\nimport MapCounters from \"../counters/MapCounters\";\nexport default {\n  name: \"DashboardMap\",\n  components: {\n    Section, Block, Button, PeriodSwitcher, ChartMap, MapCounters\n  },\n  data() {\n    return {\n      loading: true\n    }\n  },\n  async mounted() {\n    this.loading = true;\n    if (!this.isMapLoaded) {\n      await this.MAP_REQUEST().then(() => {\n        this.loading = false;\n      });\n    } else {\n      this.loading = false;\n    }\n  },\n  methods: {\n    ...mapActions(['MAP_REQUEST', 'MAP_SWITCH']),\n    loaded() {\n      this.$emit('loaded', this.loading);\n    }\n  },\n  computed: {\n    ...mapGetters(['getMapPeriod', 'getMapData', 'isMapLoaded']),\n    sortArray() {\n      const arr = this.getMapData;\n      const newArr = arr\n        .slice()\n        .sort((a, b) =>\n          a.value_negative === parseFloat(b.value_negative)\n            ? 0\n            : parseFloat(a.value_negative) < parseFloat(b.value_negative)\n            ? 1\n            : -1\n        );\n\n      return newArr\n        .filter(el => el.value_negative != 0 || el.value != 0).slice(0, 10);\n\n    }\n  },\n  watch: {\n    loading() {\n      this.loaded();\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}