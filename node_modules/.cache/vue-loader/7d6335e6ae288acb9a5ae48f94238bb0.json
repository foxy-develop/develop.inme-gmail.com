{"remainingRequest":"/Users/Front-End/Desktop/cp-v1.2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Front-End/Desktop/cp-v1.2/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Front-End/Desktop/cp-v1.2/src/views/Login.vue","mtime":1585517342000},{"path":"/Users/Front-End/Desktop/cp-v1.2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Front-End/Desktop/cp-v1.2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/Front-End/Desktop/cp-v1.2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Front-End/Desktop/cp-v1.2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgSU1hc2tDb21wb25lbnQgfSBmcm9tICJ2dWUtaW1hc2siOwppbXBvcnQgYWxsQ291bnRyaWVzIGZyb20gIi4uL2NvbnN0YW50cy9jb3VudHJ5LmNvZGVzIjsKCmV4cG9ydCBkZWZhdWx0IHsKbmFtZTogIkxvZ2luIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAicHJvZHVjdGlvbiIgPyAiIiA6ICIwMDAwMDAiLAogICAgICBwaG9uZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICJwcm9kdWN0aW9uIiA/ICIiIDogIjM4MDYzMzA3NjcxOSIsCiAgICAgIGNvdW50cnk6ICIiLAogICAgICBtYXNrOiAiKzAwMDAwMDAwMDAwMDAwMCIKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgICJpbWFzay1pbnB1dCI6IElNYXNrQ29tcG9uZW50CiAgfSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsiQVVUSF9SRVFVRVNUIiwgIkFVVEhfTE9HSU4iXSksCiAgICBnZXRDb3VudHJ5OiBmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMucGhvbmUubGVuZ3RoID4gMSkgewogICAgICAgIGNvbnN0IGNvdW50cnkgPSBhbGxDb3VudHJpZXMuZmlsdGVyKGVsID0+CiAgICAgICAgICAhcGFyc2VGbG9hdCh0aGlzLnBob25lKS50b1N0cmluZygpLmluZGV4T2YoZWwuZGlhbENvZGUpKTsKICAgICAgICBpZiAoY291bnRyeS5sZW5ndGggPiAxKSB7CiAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBjb3VudHJ5LnNsaWNlKCkuc29ydCgoYSwgYikgPT4gcGFyc2VGbG9hdChiLnByaW9yaXR5KQogICAgICAgICAgICA/IDAgOiBwYXJzZUZsb2F0KGEucHJpb3JpdHkpID4gcGFyc2VGbG9hdChiLnByaW9yaXR5KQogICAgICAgICAgICA/IDEgOiAtMSk7CiAgICAgICAgICB0aGlzLmNvdW50cnkgPSBzb3J0ZWRbY291bnRyeS5sZW5ndGggLSAxXS5pc28yOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoY291bnRyeS5sZW5ndGggPiAwKSB0aGlzLmNvdW50cnkgPSBjb3VudHJ5WzBdLmlzbzI7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbG9naW4oKSB7CiAgICAgIGNvbnN0IHsgcGFzc3dvcmQsIHBob25lIH0gPSB0aGlzOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLmlzUGhvbmVBcHByb3ZlZAogICAgICAgID8gdGhpcy5BVVRIX0xPR0lOKHsgcGFzc3dvcmQsIHBob25lIH0pLnRoZW4oCiAgICAgICAgKCkgPT4gKHRoaXMubG9hZGluZyA9IGZhbHNlKQogICAgICAgICkKICAgICAgICA6IHRoaXMuQVVUSF9SRVFVRVNUKHBob25lKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbImlzUGhvbmVBcHByb3ZlZCIsICJnZXRFcnJvck1lc3NhZ2UiXSkKICB9LAogIHdhdGNoOiB7CiAgICBwaG9uZTogZnVuY3Rpb24oKSB7CiAgICAgIHRoaXMuZ2V0Q291bnRyeSgpOwogICAgfQogIH0sCn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <form class=\"form\" @submit.prevent=\"login\">\n      <label\n        class=\"login-form__label\">\n        <span>Введите номер телефона: </span>\n        <div class=\"login-form__check\">\n          <i :class=\"['flag-icon','flag-icon-' + country]\"></i>\n          <imask-input\n            v-if=\"!isPhoneApproved\"\n            ref=\"phone\"\n            class=\"login-form__input phone-input\"\n            v-model=\"phone\"\n            :mask=\"mask\"\n            :unmask=\"false\"\n            inputmode=\"numeric\"\n          />\n          <imask-input\n            v-if=\"isPhoneApproved\"\n            ref=\"password\"\n            class=\"login-form__input login-form__input--password\"\n            v-model=\"password\"\n            inputmode=\"numeric\"\n            type=\"password\"\n          />\n        </div>\n      </label>\n      <button\n        class=\"login-form__btn\"\n        type=\"submit\"\n      >\n        {{ isPhoneApproved ? \"Подтвердить\" : \"Отправить\" }}\n      </button>\n    </form>\n</template>\n\n<script>\n  import { mapGetters, mapActions } from \"vuex\";\n  import { IMaskComponent } from \"vue-imask\";\n  import allCountries from \"../constants/country.codes\";\n\n  export default {\n  name: \"Login\",\n    data() {\n      return {\n        password: process.env.NODE_ENV === \"production\" ? \"\" : \"000000\",\n        phone: process.env.NODE_ENV === \"production\" ? \"\" : \"380633076719\",\n        country: \"\",\n        mask: \"+000000000000000\"\n      }\n    },\n    components: {\n      \"imask-input\": IMaskComponent\n    },\n    methods: {\n      ...mapActions([\"AUTH_REQUEST\", \"AUTH_LOGIN\"]),\n      getCountry: function() {\n        if (this.phone.length > 1) {\n          const country = allCountries.filter(el =>\n            !parseFloat(this.phone).toString().indexOf(el.dialCode));\n          if (country.length > 1) {\n            const sorted = country.slice().sort((a, b) => parseFloat(b.priority)\n              ? 0 : parseFloat(a.priority) > parseFloat(b.priority)\n              ? 1 : -1);\n            this.country = sorted[country.length - 1].iso2;\n          } else {\n            if (country.length > 0) this.country = country[0].iso2;\n          }\n        }\n      },\n      login() {\n        const { password, phone } = this;\n        this.loading = true;\n        this.isPhoneApproved\n          ? this.AUTH_LOGIN({ password, phone }).then(\n          () => (this.loading = false)\n          )\n          : this.AUTH_REQUEST(phone).then(() => {\n              this.loading = false;\n          });\n      }\n    },\n    computed: {\n      ...mapGetters([\"isPhoneApproved\", \"getErrorMessage\"])\n    },\n    watch: {\n      phone: function() {\n        this.getCountry();\n      }\n    },\n  }\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n"]}]}