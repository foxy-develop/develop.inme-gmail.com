{"remainingRequest":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/babel-loader/lib/index.js!/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/src/store/modules/user.js","dependencies":[{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/src/store/modules/user.js","mtime":1586245466206},{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2lubWUxL1BocHN0b3JtUHJvamVjdHMvbmV3LWNwL2RldmVsb3AuaW5tZS1nbWFpbC5jb20vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL2lubWUxL1BocHN0b3JtUHJvamVjdHMvbmV3LWNwL2RldmVsb3AuaW5tZS1nbWFpbC5jb20vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwoKdmFyIF9hY3Rpb25zLCBfbXV0YXRpb25zOwoKaW1wb3J0IHsgVVNFUl9SRVFVRVNULCBVU0VSX0VSUk9SLCBVU0VSX1NVQ0NFU1MsIFVTRVJfU1dJVENIX1RIRU1FIH0gZnJvbSAiLi4vYWN0aW9ucy91c2VyIjsKaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gIi4uLy4uL2FwaS91c2VyLnNlcnZpY2UiOwppbXBvcnQgeyBBVVRIX0xPR09VVCB9IGZyb20gIi4uL2FjdGlvbnMvYXV0aCI7CmltcG9ydCB7IFRoZW1lU2VydmljZSB9IGZyb20gIi4uLy4uL3NlcnZpY2VzL3N0b3JhZ2Uuc2VydmljZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vLi4vcm91dGVyIjsKdmFyIHN0YXRlID0gewogIHN0YXR1czogIiIsCiAgcHJvZmlsZTogewogICAgbmFtZTogIiIsCiAgICBwaG9uZTogIiIsCiAgICB0aGVtZTogVGhlbWVTZXJ2aWNlLmdldCgpIHx8ICJkYXJrIgogIH0KfTsKdmFyIGdldHRlcnMgPSB7CiAgZ2V0UHJvZmlsZTogZnVuY3Rpb24gZ2V0UHJvZmlsZShzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnByb2ZpbGU7CiAgfSwKICBpc1Byb2ZpbGVMb2FkZWQ6IGZ1bmN0aW9uIGlzUHJvZmlsZUxvYWRlZChzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnN0YXR1cyA9PT0gInN1Y2Nlc3MiOwogIH0KfTsKdmFyIGFjdGlvbnMgPSAoX2FjdGlvbnMgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBVU0VSX1JFUVVFU1QsIGZ1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZikgewogICAgdmFyIGNvbW1pdCwgZGlzcGF0Y2gsIHI7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgICAgICAgICAgIGNvbW1pdChVU0VSX1JFUVVFU1QpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIFVzZXJTZXJ2aWNlLnByb2ZpbGUoKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHIgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgaWYgKHIuc3RhdHVzKSB7CiAgICAgICAgICAgICAgY29tbWl0KFVTRVJfU1VDQ0VTUywgci5wcm9maWxlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb21taXQoVVNFUl9FUlJPUik7CiAgICAgICAgICAgICAgZGlzcGF0Y2goQVVUSF9MT0dPVVQpOwogICAgICAgICAgICAgIHJvdXRlci5wdXNoKCIvbG9naW4iKS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcjsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKSwgX2RlZmluZVByb3BlcnR5KF9hY3Rpb25zLCBVU0VSX1NXSVRDSF9USEVNRSwgZnVuY3Rpb24gKCkgewogIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoX3JlZjMpIHsKICAgIHZhciBjb21taXQsIHI7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIFVzZXJTZXJ2aWNlLnRoZW1lKCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIHIgJiYgY29tbWl0KFVTRVJfU1dJVENIX1RIRU1FLCByLnRoZW1lKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSksIF9hY3Rpb25zKTsKdmFyIG11dGF0aW9ucyA9IChfbXV0YXRpb25zID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBVU0VSX1NXSVRDSF9USEVNRSwgZnVuY3Rpb24gKHN0YXRlLCB0aGVtZSkgewogIHN0YXRlLnByb2ZpbGUudGhlbWUgPSB0aGVtZTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBVU0VSX1JFUVVFU1QsIGZ1bmN0aW9uIChzdGF0ZSkgewogIHN0YXRlLnN0YXR1cyA9ICJsb2FkaW5nIjsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBVU0VSX1NVQ0NFU1MsIGZ1bmN0aW9uIChzdGF0ZSwgcHJvZmlsZSkgewogIHN0YXRlLnN0YXR1cyA9ICJzdWNjZXNzIjsKICBzdGF0ZS5wcm9maWxlID0gcHJvZmlsZTsKfSksIF9kZWZpbmVQcm9wZXJ0eShfbXV0YXRpb25zLCBVU0VSX0VSUk9SLCBmdW5jdGlvbiAoc3RhdGUpIHsKICBzdGF0ZS5zdGF0dXMgPSAiZXJyb3IiOwp9KSwgX2RlZmluZVByb3BlcnR5KF9tdXRhdGlvbnMsIEFVVEhfTE9HT1VULCBmdW5jdGlvbiAoc3RhdGUpIHsKICBzdGF0ZS5zdGF0dXMgPSAiIjsKICBzdGF0ZS5wcm9maWxlLm5hbWUgPSAiIjsKICBzdGF0ZS5wcm9maWxlLnBob25lID0gIiI7CiAgc3RhdGUucHJvZmlsZS50aGVtZSA9ICdkYXJrJzsKfSksIF9tdXRhdGlvbnMpOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHN0YXRlLAogIGdldHRlcnM6IGdldHRlcnMsCiAgYWN0aW9uczogYWN0aW9ucywKICBtdXRhdGlvbnM6IG11dGF0aW9ucwp9Ow=="},{"version":3,"sources":["/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/src/store/modules/user.js"],"names":["USER_REQUEST","USER_ERROR","USER_SUCCESS","USER_SWITCH_THEME","UserService","AUTH_LOGOUT","ThemeService","router","state","status","profile","name","phone","theme","get","getters","getProfile","isProfileLoaded","actions","commit","dispatch","r","push","then","mutations"],"mappings":"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","sourcesContent":["import {\n  USER_REQUEST,\n  USER_ERROR,\n  USER_SUCCESS,\n  USER_SWITCH_THEME\n} from \"../actions/user\";\n\nimport UserService from \"../../api/user.service\";\nimport { AUTH_LOGOUT } from \"../actions/auth\";\nimport { ThemeService } from \"../../services/storage.service\";\nimport router from \"../../router\";\n\nconst state = {\n  status: \"\",\n  profile: {\n    name: \"\",\n    phone: \"\",\n    theme: ThemeService.get() || \"dark\"\n  }\n};\n\nconst getters = {\n  getProfile: state => state.profile,\n  isProfileLoaded: state => state.status === \"success\"\n};\n\nconst actions = {\n  [USER_REQUEST]: async ({ commit, dispatch }) => {\n    commit(USER_REQUEST);\n    const r = await UserService.profile();\n    if ( r.status ) {\n      commit(USER_SUCCESS, r.profile);\n    } else {\n      commit(USER_ERROR);\n      dispatch(AUTH_LOGOUT);\n      router.push(\"/login\").then(r => r);\n    }\n    return;\n  },\n  [USER_SWITCH_THEME]: async ({ commit }) => {\n    const r = await UserService.theme();\n    r && commit(USER_SWITCH_THEME, r.theme);\n    return;\n  }\n};\n\nconst mutations = {\n  [USER_SWITCH_THEME]: ( state, theme ) => {\n    state.profile.theme = theme;\n  },\n  [USER_REQUEST]: state => {\n    state.status = \"loading\";\n  },\n  [USER_SUCCESS]: (state, profile) => {\n    state.status = \"success\";\n    state.profile = profile;\n  },\n  [USER_ERROR]: state => {\n    state.status = \"error\";\n  },\n  [AUTH_LOGOUT]: state => {\n    state.status = \"\";\n    state.profile.name = \"\";\n    state.profile.phone = \"\";\n    state.profile.theme = 'dark';\n  }\n};\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n};\n"]}]}