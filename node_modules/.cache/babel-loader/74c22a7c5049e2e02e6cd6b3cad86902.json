{"remainingRequest":"/Users/inme/new-cp/develop.inme-gmail.com/node_modules/babel-loader/lib/index.js!/Users/inme/new-cp/develop.inme-gmail.com/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/inme/new-cp/develop.inme-gmail.com/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/inme/new-cp/develop.inme-gmail.com/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/inme/new-cp/develop.inme-gmail.com/src/views/Login.vue","mtime":1585560599243},{"path":"/Users/inme/new-cp/develop.inme-gmail.com/node_modules/cache-loader/dist/cjs.js","mtime":1585560594906},{"path":"/Users/inme/new-cp/develop.inme-gmail.com/node_modules/babel-loader/lib/index.js","mtime":1585560594458},{"path":"/Users/inme/new-cp/develop.inme-gmail.com/node_modules/cache-loader/dist/cjs.js","mtime":1585560594906},{"path":"/Users/inme/new-cp/develop.inme-gmail.com/node_modules/vue-loader/lib/index.js","mtime":1585560598633}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1mbG9hdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvaW5tZS9uZXctY3AvZGV2ZWxvcC5pbm1lLWdtYWlsLmNvbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgSU1hc2tDb21wb25lbnQgfSBmcm9tICJ2dWUtaW1hc2siOwppbXBvcnQgYWxsQ291bnRyaWVzIGZyb20gIi4uL2NvbnN0YW50cy9jb3VudHJ5LmNvZGVzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dpbiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gInByb2R1Y3Rpb24iID8gIiIgOiAiMDAwMDAwIiwKICAgICAgcGhvbmU6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAicHJvZHVjdGlvbiIgPyAiIiA6ICIzODA2MzMwNzY3MTkiLAogICAgICBjb3VudHJ5OiAiIiwKICAgICAgbWFzazogIiswMDAwMDAwMDAwMDAwMDAiLAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgICJpbWFzay1pbnB1dCI6IElNYXNrQ29tcG9uZW50CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsiQVVUSF9SRVFVRVNUIiwgIkFVVEhfTE9HSU4iXSksIHsKICAgIGdldENvdW50cnk6IGZ1bmN0aW9uIGdldENvdW50cnkoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5waG9uZS5sZW5ndGggPiAxKSB7CiAgICAgICAgdmFyIGNvdW50cnkgPSBhbGxDb3VudHJpZXMuZmlsdGVyKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgcmV0dXJuICFwYXJzZUZsb2F0KF90aGlzLnBob25lKS50b1N0cmluZygpLmluZGV4T2YoZWwuZGlhbENvZGUpOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoY291bnRyeS5sZW5ndGggPiAxKSB7CiAgICAgICAgICB2YXIgc29ydGVkID0gY291bnRyeS5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoYi5wcmlvcml0eSkgPyAwIDogcGFyc2VGbG9hdChhLnByaW9yaXR5KSA+IHBhcnNlRmxvYXQoYi5wcmlvcml0eSkgPyAxIDogLTE7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuY291bnRyeSA9IHNvcnRlZFtjb3VudHJ5Lmxlbmd0aCAtIDFdLmlzbzI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChjb3VudHJ5Lmxlbmd0aCA+IDApIHRoaXMuY291bnRyeSA9IGNvdW50cnlbMF0uaXNvMjsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHBhc3N3b3JkID0gdGhpcy5wYXNzd29yZCwKICAgICAgICAgIHBob25lID0gdGhpcy5waG9uZTsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5pc1Bob25lQXBwcm92ZWQgPyB0aGlzLkFVVEhfTE9HSU4oewogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgICBwaG9uZTogcGhvbmUKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pIDogdGhpcy5BVVRIX1JFUVVFU1QocGhvbmUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0pLAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsiaXNQaG9uZUFwcHJvdmVkIiwgImdldEVycm9yTWVzc2FnZSJdKSksCiAgd2F0Y2g6IHsKICAgIHBob25lOiBmdW5jdGlvbiBwaG9uZSgpIHsKICAgICAgdGhpcy5nZXRDb3VudHJ5KCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,SAAA,cAAA,QAAA,WAAA;AACA,OAAA,YAAA,MAAA,4BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,OAAA,CAAA,GAAA,CAAA,QAAA,KAAA,YAAA,GAAA,EAAA,GAAA,QADA;AAEA,MAAA,KAAA,EAAA,OAAA,CAAA,GAAA,CAAA,QAAA,KAAA,YAAA,GAAA,EAAA,GAAA,cAFA;AAGA,MAAA,OAAA,EAAA,EAHA;AAIA,MAAA,IAAA,EAAA,kBAJA;AAKA,MAAA,OAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,UAAA,EAAA;AACA,mBAAA;AADA,GAXA;AAcA,EAAA,OAAA,oBACA,UAAA,CAAA,CAAA,cAAA,EAAA,YAAA,CAAA,CADA;AAEA,IAAA,UAAA,EAAA,sBAAA;AAAA;;AACA,UAAA,KAAA,KAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,YAAA,OAAA,GAAA,YAAA,CAAA,MAAA,CAAA,UAAA,EAAA;AAAA,iBACA,CAAA,UAAA,CAAA,KAAA,CAAA,KAAA,CAAA,CAAA,QAAA,GAAA,OAAA,CAAA,EAAA,CAAA,QAAA,CADA;AAAA,SAAA,CAAA;;AAEA,YAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,cAAA,MAAA,GAAA,OAAA,CAAA,KAAA,GAAA,IAAA,CAAA,UAAA,CAAA,EAAA,CAAA;AAAA,mBAAA,UAAA,CAAA,CAAA,CAAA,QAAA,CAAA,GACA,CADA,GACA,UAAA,CAAA,CAAA,CAAA,QAAA,CAAA,GAAA,UAAA,CAAA,CAAA,CAAA,QAAA,CAAA,GACA,CADA,GACA,CAAA,CAFA;AAAA,WAAA,CAAA;AAGA,eAAA,OAAA,GAAA,MAAA,CAAA,OAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA,IAAA;AACA,SALA,MAKA;AACA,cAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA,KAAA,OAAA,GAAA,OAAA,CAAA,CAAA,CAAA,CAAA,IAAA;AACA;AACA;AACA,KAfA;AAgBA,IAAA,KAhBA,mBAgBA;AAAA;;AAAA,UACA,QADA,GACA,IADA,CACA,QADA;AAAA,UACA,KADA,GACA,IADA,CACA,KADA;AAEA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,eAAA,GACA,KAAA,UAAA,CAAA;AAAA,QAAA,QAAA,EAAA,QAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAAA,EAAA,IAAA,CAAA;AAAA,eAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AAAA,OAAA,CADA,GAEA,KAAA,YAAA,CAAA,KAAA,EAAA,IAAA,CAAA,YAAA;AAAA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AAAA,OAAA,CAFA;AAGA;AAtBA,IAdA;AAsCA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,iBAAA,EAAA,iBAAA,CAAA,CADA,CAtCA;AAyCA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA,iBAAA;AACA,WAAA,UAAA;AACA;AAHA;AAzCA,CAAA","sourcesContent":["<template>\n    <form class=\"form\" @submit.prevent=\"login\">\n      <label\n        class=\"login-form__label\">\n        <span>Введите номер телефона: </span>\n        <div class=\"login-form__check\">\n          <i :class=\"['flag-icon','flag-icon-' + country]\"></i>\n          <imask-input\n            v-if=\"!isPhoneApproved\"\n            ref=\"phone\"\n            class=\"login-form__input phone-input\"\n            v-model=\"phone\"\n            :mask=\"mask\"\n            :unmask=\"false\"\n            inputmode=\"numeric\"\n          />\n          <imask-input\n            v-if=\"isPhoneApproved\"\n            ref=\"password\"\n            class=\"login-form__input login-form__input--password\"\n            v-model=\"password\"\n            inputmode=\"numeric\"\n            type=\"password\"\n          />\n        </div>\n      </label>\n      <button\n        class=\"login-form__btn\"\n        type=\"submit\"\n      >\n        {{ isPhoneApproved ? \"Подтвердить\" : \"Отправить\" }}\n      </button>\n    </form>\n</template>\n\n<script>\n  import { mapGetters, mapActions } from \"vuex\";\n  import { IMaskComponent } from \"vue-imask\";\n  import allCountries from \"../constants/country.codes\";\n\n  export default {\n  name: \"Login\",\n    data() {\n      return {\n        password: process.env.NODE_ENV === \"production\" ? \"\" : \"000000\",\n        phone: process.env.NODE_ENV === \"production\" ? \"\" : \"380633076719\",\n        country: \"\",\n        mask: \"+000000000000000\",\n        loading: false\n      }\n    },\n    components: {\n      \"imask-input\": IMaskComponent\n    },\n    methods: {\n      ...mapActions([\"AUTH_REQUEST\", \"AUTH_LOGIN\"]),\n      getCountry: function() {\n        if (this.phone.length > 1) {\n          const country = allCountries.filter(el =>\n            !parseFloat(this.phone).toString().indexOf(el.dialCode));\n          if (country.length > 1) {\n            const sorted = country.slice().sort((a, b) => parseFloat(b.priority)\n              ? 0 : parseFloat(a.priority) > parseFloat(b.priority)\n              ? 1 : -1);\n            this.country = sorted[country.length - 1].iso2;\n          } else {\n            if (country.length > 0) this.country = country[0].iso2;\n          }\n        }\n      },\n      login() {\n        const { password, phone } = this;\n        this.loading = true;\n        this.isPhoneApproved\n          ? this.AUTH_LOGIN({ password, phone }).then(() => (this.loading = false))\n          : this.AUTH_REQUEST(phone).then(() => { this.loading = false; });\n      }\n    },\n    computed: {\n      ...mapGetters([\"isPhoneApproved\", \"getErrorMessage\"])\n    },\n    watch: {\n      phone: function() {\n        this.getCountry();\n      }\n    },\n  }\n</script>\n\n<style scoped lang=\"scss\">\n\n</style>\n"],"sourceRoot":"src/views"}]}