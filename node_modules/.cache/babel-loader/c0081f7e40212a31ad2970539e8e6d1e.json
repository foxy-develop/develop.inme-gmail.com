{"remainingRequest":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/babel-loader/lib/index.js!/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/src/api/auth.service.js","dependencies":[{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/src/api/auth.service.js","mtime":1586389910201},{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9pbm1lMS9QaHBzdG9ybVByb2plY3RzL25ldy1jcC9kZXZlbG9wLmlubWUtZ21haWwuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvaW5tZTEvUGhwc3Rvcm1Qcm9qZWN0cy9uZXctY3AvZGV2ZWxvcC5pbm1lLWdtYWlsLmNvbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy9pbm1lMS9QaHBzdG9ybVByb2plY3RzL25ldy1jcC9kZXZlbG9wLmlubWUtZ21haWwuY29tL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL2lubWUxL1BocHN0b3JtUHJvamVjdHMvbmV3LWNwL2RldmVsb3AuaW5tZS1nbWFpbC5jb20vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF93cmFwTmF0aXZlU3VwZXIgZnJvbSAiL1VzZXJzL2lubWUxL1BocHN0b3JtUHJvamVjdHMvbmV3LWNwL2RldmVsb3AuaW5tZS1nbWFpbC5jb20vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3dyYXBOYXRpdmVTdXBlciI7CmltcG9ydCBBcGlTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL2FwaS5zZXJ2aWNlIjsKaW1wb3J0IHsgVG9rZW5TZXJ2aWNlLCBUaGVtZVNlcnZpY2UgfSBmcm9tICIuLi9zZXJ2aWNlcy9zdG9yYWdlLnNlcnZpY2UiOwppbXBvcnQgeyBBUElfQVVUSCB9IGZyb20gIi4vYXBpLmVuZHBvaW50cyI7Cgp2YXIgQXV0aGVudGljYXRpb25FcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Vycm9yKSB7CiAgX2luaGVyaXRzKEF1dGhlbnRpY2F0aW9uRXJyb3IsIF9FcnJvcik7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoQXV0aGVudGljYXRpb25FcnJvcik7CgogIGZ1bmN0aW9uIEF1dGhlbnRpY2F0aW9uRXJyb3IoZXJyb3JDb2RlLCBtZXNzYWdlKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGhlbnRpY2F0aW9uRXJyb3IpOwoKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSk7CiAgICBfdGhpcy5uYW1lID0gX3RoaXMuY29uc3RydWN0b3IubmFtZTsKICAgIF90aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgX3RoaXMuZXJyb3JDb2RlID0gZXJyb3JDb2RlOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgcmV0dXJuIEF1dGhlbnRpY2F0aW9uRXJyb3I7Cn0oIC8qI19fUFVSRV9fKi9fd3JhcE5hdGl2ZVN1cGVyKEVycm9yKSk7Cgp2YXIgQXV0aFNlcnZpY2UgPSB7CiAgYXV0aDogZnVuY3Rpb24gKCkgewogICAgdmFyIF9hdXRoID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHBob25lKSB7CiAgICAgIHZhciByZXNwb25zZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoQVBJX0FVVEguR0VUX1BBU1MsIHsKICAgICAgICAgICAgICAgIHBob25lOiBwaG9uZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3RhdHVzID09IDIwMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDg7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihfY29udGV4dC50MC5yZXNwb25zZS5zdGF0dXMsIF9jb250ZXh0LnQwLnJlc3BvbnNlLmRhdGEuZGV0YWlsKTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOF1dKTsKICAgIH0pKTsKCiAgICBmdW5jdGlvbiBhdXRoKF94KSB7CiAgICAgIHJldHVybiBfYXV0aC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIHJldHVybiBhdXRoOwogIH0oKSwKICBsb2dpbjogZnVuY3Rpb24gKCkgewogICAgdmFyIF9sb2dpbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocGFzc3dvcmQsIHBob25lKSB7CiAgICAgIHZhciByZXNwb25zZTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnBvc3QoQVBJX0FVVEguTE9HSU4sIHsKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgICAgICAgICAgIHBob25lOiBwaG9uZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgIGlmICghcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdGF0dXMpIHsKICAgICAgICAgICAgICAgIFRva2VuU2VydmljZS5zYXZlKHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgQXBpU2VydmljZS5zZXRIZWFkZXIoKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCByZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICB0aHJvdyBuZXcgQXV0aGVudGljYXRpb25FcnJvcihyZXNwb25zZS5kYXRhLnN0YXR1cywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMjsKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoX2NvbnRleHQyLnQwLnJlc3BvbnNlLnN0YXR1cywgX2NvbnRleHQyLnQwLnJlc3BvbnNlLmRhdGEuZGV0YWlsKTsKCiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1swLCAxMl1dKTsKICAgIH0pKTsKCiAgICBmdW5jdGlvbiBsb2dpbihfeDIsIF94MykgewogICAgICByZXR1cm4gX2xvZ2luLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgcmV0dXJuIGxvZ2luOwogIH0oKSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgIHZhciByZXNwb25zZSA9IEFwaVNlcnZpY2UuZ2V0KEFQSV9BVVRILkxPR09VVCk7CiAgICBUb2tlblNlcnZpY2UucmVtb3ZlKCk7CiAgICBUaGVtZVNlcnZpY2UucmVtb3ZlKCk7CiAgICBBcGlTZXJ2aWNlLnJlbW92ZUhlYWRlcigpOwogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgQXV0aFNlcnZpY2U7CmV4cG9ydCB7IEF1dGhTZXJ2aWNlLCBBdXRoZW50aWNhdGlvbkVycm9yIH07"},{"version":3,"sources":["/Users/inme1/PhpstormProjects/new-cp/develop.inme-gmail.com/src/api/auth.service.js"],"names":["ApiService","TokenService","ThemeService","API_AUTH","AuthenticationError","errorCode","message","name","constructor","Error","AuthService","auth","phone","post","GET_PASS","response","status","data","detail","login","password","LOGIN","save","token","setHeader","logout","get","LOGOUT","remove","removeHeader"],"mappings":";;;;;;;AAAA,OAAOA,UAAP,MAAuB,yBAAvB;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,6BAA3C;AACA,SAASC,QAAT,QAAyB,iBAAzB;;IAEMC,mB;;;;;AACJ,+BAAYC,SAAZ,EAAuBC,OAAvB,EAAgC;AAAA;;AAAA;;AAC9B,8BAAMA,OAAN;AACA,UAAKC,IAAL,GAAY,MAAKC,WAAL,CAAiBD,IAA7B;AACA,UAAKD,OAAL,GAAeA,OAAf;AACA,UAAKD,SAAL,GAAiBA,SAAjB;AAJ8B;AAK/B;;;iCAN+BI,K;;AASlC,IAAMC,WAAW,GAAG;AAClBC,EAAAA,IAAI;AAAA,wEAAE,iBAAeC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEqBZ,UAAU,CAACa,IAAX,CAAgBV,QAAQ,CAACW,QAAzB,EAAmC;AAAEF,gBAAAA,KAAK,EAALA;AAAF,eAAnC,CAFrB;;AAAA;AAEIG,cAAAA,QAFJ;;AAAA,oBAGEA,QAAQ,IAAIA,QAAQ,CAACC,MAAT,IAAmB,GAHjC;AAAA;AAAA;AAAA;;AAAA,+CAIOD,QAAQ,CAACE,IAJhB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,oBAOI,IAAIb,mBAAJ,CACJ,YAAMW,QAAN,CAAeC,MADX,EAEJ,YAAMD,QAAN,CAAeE,IAAf,CAAoBC,MAFhB,CAPJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KADc;AAelBC,EAAAA,KAAK;AAAA,yEAAE,kBAAeC,QAAf,EAAyBR,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEoBZ,UAAU,CAACa,IAAX,CAAgBV,QAAQ,CAACkB,KAAzB,EAAgC;AACrDD,gBAAAA,QAAQ,EAARA,QADqD;AAC3CR,gBAAAA,KAAK,EAALA;AAD2C,eAAhC,CAFpB;;AAAA;AAEGG,cAAAA,QAFH;;AAAA,mBAICA,QAAQ,CAACE,IAJV;AAAA;AAAA;AAAA;;AAKD,kBAAIF,QAAQ,CAACE,IAAT,CAAcD,MAAlB,EAA0B;AACxBf,gBAAAA,YAAY,CAACqB,IAAb,CAAkBP,QAAQ,CAACE,IAAT,CAAcM,KAAhC;AACAvB,gBAAAA,UAAU,CAACwB,SAAX;AACD;;AARA,gDASMT,QAAQ,CAACE,IATf;;AAAA;AAAA,oBAWK,IAAIb,mBAAJ,CACJW,QAAQ,CAACE,IAAT,CAAcD,MADV,EAEJD,QAAQ,CAACE,IAAT,CAAcX,OAFV,CAXL;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,oBAiBG,IAAIF,mBAAJ,CACJ,aAAMW,QAAN,CAAeC,MADX,EAEJ,aAAMD,QAAN,CAAeE,IAAf,CAAoBC,MAFhB,CAjBH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,KAfa;AAuClBO,EAAAA,MAAM,EAAE,kBAAW;AACjB,QAAMV,QAAQ,GAAGf,UAAU,CAAC0B,GAAX,CAAevB,QAAQ,CAACwB,MAAxB,CAAjB;AACA1B,IAAAA,YAAY,CAAC2B,MAAb;AACA1B,IAAAA,YAAY,CAAC0B,MAAb;AACA5B,IAAAA,UAAU,CAAC6B,YAAX;AACA,WAAOd,QAAP;AACD;AA7CiB,CAApB;AAgDA,eAAeL,WAAf;AACA,SAASA,WAAT,EAAsBN,mBAAtB","sourcesContent":["import ApiService from \"../services/api.service\";\nimport { TokenService, ThemeService } from \"../services/storage.service\";\nimport { API_AUTH } from \"./api.endpoints\";\n\nclass AuthenticationError extends Error {\n  constructor(errorCode, message) {\n    super(message);\n    this.name = this.constructor.name;\n    this.message = message;\n    this.errorCode = errorCode;\n  }\n}\n\nconst AuthService = {\n  auth: async function(phone) {\n    try {\n      const response = await ApiService.post(API_AUTH.GET_PASS, { phone });\n      if (response && response.status == 200) {\n        return response.data;\n      }\n    } catch (error) {\n      throw new AuthenticationError(\n        error.response.status,\n        error.response.data.detail\n      );\n    }\n  },\n\n  login: async function(password, phone) {\n    try {\n      const response = await ApiService.post(API_AUTH.LOGIN, {\n        password, phone});\n      if (response.data) {\n        if (response.data.status) {\n          TokenService.save(response.data.token);\n          ApiService.setHeader();\n        }\n        return response.data;\n      } else {\n        throw new AuthenticationError(\n          response.data.status,\n          response.data.message\n        );\n      }\n    } catch (error) {\n      throw new AuthenticationError(\n        error.response.status,\n        error.response.data.detail\n      );\n    }\n  },\n\n  logout: function() {\n    const response = ApiService.get(API_AUTH.LOGOUT);\n    TokenService.remove();\n    ThemeService.remove();\n    ApiService.removeHeader();\n    return response;\n  }\n};\n\nexport default AuthService;\nexport { AuthService, AuthenticationError };\n"]}]}